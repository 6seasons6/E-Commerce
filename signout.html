<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signing Out...</title>
    <script>
        document.addEventListener("DOMContentLoaded", async function () {
            try {
                // ✅ Remove token before sending request (to ensure it's cleared)
                localStorage.removeItem("authToken");
                localStorage.removeItem('username');
                console.log("Removed token from localStorage");
                
                // ✅ Send logout request
                const response = await fetch("http://127.0.0.1:5000/api/logout", {
                    method: "POST",  
                    headers: { "Content-Type": "application/json" }
                });

                if (!response.ok) {
                    throw new Error(`Logout failed: ${response.statusText}`);
                }

                console.log("Logout successful, redirecting...");

                // ✅ Redirect after logout request
                window.location.href = "signin.html";

            } catch (error) {
                console.error("Error during sign out:", error);
            }
        });
    </script>        
</head>
<body>
</body>
</html>
